%%% Hlavní soubor. Zde se definují základní parametry a odkazuje se na ostatní části. %%%

%% Verze pro jednostranný tisk:
% Okraje: levý 40mm, pravý 25mm, horní a dolní 25mm
% (ale pozor, LaTeX si sám přidává 1in)
\documentclass[12pt,a4paper]{report}
\setlength\textwidth{145mm}
\setlength\textheight{247mm}
\setlength\oddsidemargin{15mm}
\setlength\evensidemargin{15mm}
\setlength\topmargin{0mm}
\setlength\headsep{0mm}
\setlength\headheight{0mm}
% \openright zařídí, aby následující text začínal na pravé straně knihy
\let\openright=\clearpage

\renewcommand\baselinestretch{1.3} % riadkovanie jeden a pol

%% Pokud tiskneme oboustranně:
% \documentclass[12pt,a4paper,twoside,openright]{report}
% \setlength\textwidth{145mm}
% \setlength\textheight{247mm}
% \setlength\oddsidemargin{15mm}
% \setlength\evensidemargin{0mm}
% \setlength\topmargin{0mm}
% \setlength\headsep{0mm}
% \setlength\headheight{0mm}
% \let\openright=\cleardoublepage

%% Pokud pouľíváte csLaTeX (doporučeno):
%\usepackage{czech}
%% Pokud nikoliv:
%\usepackage[czech]{babel}
%\usepackage[T1]{fontenc}

%% Pouľité kódování znaků: obvykle latin2, cp1250 nebo utf8:
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

%% Ostatní balíčky
\usepackage{graphicx}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{alltt}
\usepackage{todonotes}
\usepackage{algorithmic}
\usepackage[chapter]{algorithm}
\usepackage{enumerate}
\usepackage{multirow}
\usepackage{threeparttable}
\usepackage{listings}
\usepackage{algorithmic}
\usepackage[chapter]{algorithm}

\usepackage{color}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\newcommand{\lstfont}{\small\ttfamily}
\lstset{ %
  language=,                % the language of the code
  basicstyle=\lstfont,           % the size of the fonts that are used for the code
  %numbers=left,                   % where to put the line-numbers
  %numberstyle=\tiny\color{gray},  % the style that is used for the line-numbers
  %stepnumber=2,                   % the step between two line-numbers. If it's 1, each line 
                                  % will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  backgroundcolor=\color{white},      % choose the background color. You must add \usepackage{color}
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  frame=single,                   % adds a frame around the code
  rulecolor=\color{black},        % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. commens (green here))
  tabsize=2,                      % sets default tabsize to 2 spaces
  captionpos=b,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
  title=\lstname,                   % show the filename of files included with \lstinputlisting;
                                  % also try caption instead of title
  keywordstyle=\color{blue},          % keyword style
  commentstyle=\color{dkgreen},       % comment style
  stringstyle=\color{mauve},         % string literal style
  escapeinside={\%*}{*)},            % if you want to add a comment within your code
  morekeywords={*,...},              % if you want to add more keywords to the set
}

\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

\renewcommand{\algorithmicforall}{\textbf{for each}}

\renewcommand{\algorithmiccomment}[1]{// #1}

% pekne pokope definujeme potrebne udaje
\def\mftitle{Inference of an XML Schema with the Knowledge of XML Operations}
\def\mfthesistype{Master Thesis}
\def\mfauthor{Mário Mikula}
\def\mfadvisor{RNDr. Irena Mlýnková, Ph.D.}
\def\mfplacedate{Praha, 2011}

%% Balíček hyperref, kterým jdou vyrábět klikací odkazy v PDF,
%% ale hlavně ho pouľíváme k uloľení metadat do PDF (včetně obsahu).
%% POZOR, nezapomeňte vyplnit jméno práce a autora.
\usepackage[ps2pdf,unicode]{hyperref}   % Musí být za vąemi ostatními balíčky
\hypersetup{pdftitle=\mftitle}
\hypersetup{pdfauthor=\mfauthor}

%%% Drobné úpravy stylu

% Tato makra přesvědčují mírně oąklivým trikem LaTeX, aby hlavičky kapitol
% sázel příčetněji a nevynechával nad nimi spoustu místa. Směle ignorujte.
%\makeatletter
%\def\@makechapterhead#1{
%  {\parindent \z@ \raggedright \normalfont
%   \Huge\bfseries \thechapter. #1
%   \par\nobreak
%   \vskip 20\p@
%}}
%\def\@makeschapterhead#1{
%  {\parindent \z@ \raggedright \normalfont
%   \Huge\bfseries #1
%   \par\nobreak
%   \vskip 20\p@
%}}
%\makeatother

% Toto makro definuje kapitolu, která není očíslovaná, ale je uvedena v obsahu.
\def\chapwithtoc#1{
\chapter*{#1}
\addcontentsline{toc}{chapter}{#1}
}


% Theorem environment
\newenvironment{definition}[1][Definition]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}]}{\end{trivlist}}


\begin{document}

% Trochu volnějąí nastavení dělení slov, neľ je default.
\lefthyphenmin=2
\righthyphenmin=2

%%% Titulní strana práce

\pagestyle{empty}
\begin{center}

\large

Charles University in Prague

\medskip

Faculty of Mathematics and Physics

\vfill

{\bf\Large \mfthesistype}

\vfill

\centerline{\mbox{\includegraphics[width=60mm]{logo.eps}}}

\vfill
\vspace{5mm}

{\LARGE \mfauthor}

\vspace{15mm}

% Název práce přesně podle zadání
{\LARGE\bfseries \mftitle}

\vfill

% Název katedry nebo ústavu, kde byla práce oficiálně zadána
% (dle Organizační struktury MFF UK)
Department of Software Engineering

\vfill

\begin{tabular}{rl}

Supervisor of the master thesis: & \mfadvisor \\
\noalign{\vspace{2mm}}
Study programme: & Informatika \\
\noalign{\vspace{2mm}}
Specialization: & ISS \\
\end{tabular}

\vfill

% Zde doplňte rok
\mfplacedate

\end{center}

\newpage

%%% Následuje vevázaný list -- kopie podepsaného "Zadání diplomové práce".
%%% Toto zadání NENÍ součástí elektronické verze práce, nescanovat.

%%% Na tomto místě mohou být napsána případná poděkování (vedoucímu práce,
%%% konzultantovi, tomu, kdo zapůjčil software, literaturu apod.)

\openright

\noindent
I would like to thank my supervisor RNDr. Irena Mlýnková, Ph.D., for her helpful advices, corrections and suggestions.

\newpage

%%% Strana s čestným prohláąením k diplomové práci

\vglue 0pt plus 1fill

\noindent
I declare that I carried out this master thesis independently, and only with the cited
sources, literature and other professional sources.

\medskip\noindent
I understand that my work relates to the rights and obligations under the Act No.
121/2000 Coll., the Copyright Act, as amended, in particular the fact that the Charles
University in Prague has the right to conclude a license agreement on the use of this
work as a school work pursuant to Section 60 paragraph 1 of the Copyright Act.

\vspace{10mm}

\hbox{\hbox to 0.5\hsize{%
In ........ date ............
\hss}\hbox to 0.5\hsize{%
Signature
\hss}}

\vspace{20mm}
\newpage

%%% Povinná informační strana diplomové práce

\vbox to 0.5\vsize{
\setlength\parindent{0mm}
\setlength\parskip{5mm}

Název práce:
Odvozování XML schémy se znalostí XML operací
% přesně dle zadání

Autor:
\mfauthor

Katedra:  % Případně Ústav:
Katedra softwarového inženýrství
% dle Organizační struktury MFF UK

Vedoucí diplomové práce:
\mfadvisor
% dle Organizační struktury MFF UK, případně plný název pracoviątě mimo MFF UK

Abstrakt: V poslednej dobe bolo vyvinutých množstvo metód zaoberajúcich sa automatickým odvodzovaním XML schémy. Väčšina z nich ale používa XML dokumenty ako jediný vstup. My sa v tejto práci zameriavame na rozšírenie odvo\-dzo\-vania zahrnutím XML operácií, konkrétne XQuery dotazov. Diskutujeme ako je možné využiť XQuery dotazy na vylepšenie procesu odvodzovania a navrhujeme algoritmus založený na vybraných vylepšeniach, ktorý rozširuje existujúcu metódu hľadania kľúčov a ktorý môže byť začlenený do tzv. \emph{metód odvodzujúcich gramatiku}. Implementovaním algoritmu sme vytvorili prvé kompletné riešenie odvodzovania XML schémy, ktoré využíva XML dokumenty spolu s XML operáciami.
% abstrakt v rozsahu 80-200 slov; nejedná se vąak o opis zadání diplomové práce

Klíčová slova: XML, XML schéma, odvozování, XQuery, dotazy, XML operace
% 3 aľ 5 klíčových slov

\vss}\nobreak\vbox to 0.49\vsize{
\setlength\parindent{0mm}
\setlength\parskip{5mm}

Title:
\mftitle
% přesný překlad názvu práce v angličtině

Author:
\mfauthor

Department:
Department of Software Engineering
% dle Organizační struktury MFF UK v angličtině

Supervisor:
\mfadvisor
% dle Organizační struktury MFF UK, případně plný název pracoviątě
% mimo MFF UK v angličtině

Abstract: Recently, plenty of methods dealing with automatic inference of XML schema have been developed, however, most of them utilize XML documents as their only input. In this thesis we focus on extending inference by incorporating XML operations, in particular XQuery queries. We discuss how can XQuery queries help in improving the inference process and we propose an algorithm based on chosen improvements, extending an existing method of a key discovery, that can be integrated to so-called \emph{grammar-inferring} methods. By implementing it, we created the first solution of XML schema inference using XML documents along with XML operations.
% abstrakt v rozsahu 80-200 slov v angličtině; nejedná se vąak o překlad
% zadání diplomové práce 

Keywords: XML, XML schema, inference, XQuery, queries, XML operations
% 3 aľ 5 klíčových slov v angličtině

\vss}

\newpage

%%% Strana s automaticky generovaným obsahem diplomové práce. U matematických
%%% prací je přípustné, aby seznam tabulek a zkratek, existují-li, byl umístěn
%%% na začátku práce, místo na jejím konci.

\openright
\pagestyle{plain}
\renewcommand\thepage{}
\tableofcontents

\newtheorem{theorem}{Theorem}
\theoremstyle{definition}
%\newtheorem*{define}{Definition}	% Definice nečíslujeme, proto "*"
\newtheorem{define}{Definition}[chapter]
\newtheorem{example}{Example}

\newpage
\renewcommand\thepage{\arabic{page}}
\setcounter{page}{1}

%%% Jednotlivé kapitoly práce jsou pro přehlednost uloľeny v samostatných souborech
\include{introduction}
\include{used_technologies_and_definitions}
\include{analysis_of_recent_approaches}
\include{analysis_of_xquery}
\include{pre_creation_of_algorithm}
\include{proposed_algorithm}
\include{combination_with_existing_methods_of_inference}
\include{implementation}
\include{experiments}
\include{conclusion}

%%% Seznam pouľité literatury
\nocite{*}
\bibliographystyle{plain}
\bibliography{literature}

%%% Pouľité zkratky v diplomové práci, existují-li, včetně jejich vysvětlení.
%\chapwithtoc{List of Abbreviations}
%\todo[inline]{Není nutno.}

%%% Přílohy k diplomové práci, existují-li (různé dodatky jako výpisy programů,
%%% diagramy apod.). Kaľdá příloha musí být alespoň jednou odkazována z vlastního
%%% textu práce. Přílohy se číslují.
%\chapwithtoc{Attachments}
\appendix
\include{appendix_a}
\include{appendix_b}
\include{appendix_c}

%%% Tabulky v diplomové práci, existují-li.
%\chapwithtoc{List of Tables}
\listoftables
\listoffigures

\openright
\end{document}
